@import "tailwindcss";

@plugin '@tailwindcss/typography';
@plugin '@tailwindcss/forms';
@import "tailwindcss-animated";
@import "tailwindcss-intersect";

@font-face {
  font-family: "Honk";
  src: url("/fonts/Honk-Regular-VariableFont_MORF,SHLN.ttf") format("truetype");
}

@font-face {
  font-family: "Quicksand";
  src: url("/fonts/Quicksand-VariableFont_wght.ttf") format("truetype");
}

@font-face {
  font-family: "Domine";
  src: url("/fonts/Domine-Regular.ttf") format("truetype");
}

@font-face {
  font-family: "helveticaneuebold";
  src: url("/fonts/HelveticaNeueBold.woff2") format("woff2");
}

@font-face {
  font-family: "helveticaneueblack";
  src: url("/fonts/HelveticaNeueBlack.woff2") format("woff2");
}

@theme {
  /* Her tilføjes theme variable // tokens */

  /*Farver */
  --color-primary-400: #00e4f5;
  --color-primary-500: #006269;
  --color-primary-600: #006d75;
  --color-secondary-400: #f5e400;
  --color-secondary-500: #f5a600;
  --color-secondary-600: #f57a00;

  /*Typografi */
  --font-display: "Honk", monospace;
  --font-sans: "Quicksand", sans-serif;
  --font-serif: "Domine", serif;
  /* Brand red - central token for site-wide red color */
  --color-red: #e41a1a;
  /* RGB form for usage in rgba() where needed */
  --color-red-rgb: 228, 26, 26;
  /* Default text color (brand) */
  --text-color: var(--color-red);
}

@layer base {
  /* Make all h1 elements use Helvetica Neue Heavy (falls back to Quicksand/ system sans)
     If you want to bundle Helvetica Neue, add a @font-face and point to the font file. */
  h1 {
    /* Use local/bundled 'helveticaneuebold' if available, otherwise fall back */
    font-family: "helveticaneueblack", "Helvetica Neue", var(--font-sans);
    font-weight: 800;
    /* Make h1 generally a bit larger and responsive; use clamp for fluid sizing */
    font-size: clamp(2.75rem, 6.5vw, 7rem) !important;
    line-height: 1.02;
  }

  /* Make paragraph text use Helvetica Neue Bold (fallback to project's --font-sans)
     Adjust weight to 700 for bold semantics across browsers. */
  p {
    font-family: "Helvetica Neue", var(--font-sans);
    font-weight: 700;
    /* Make paragraphs effectively 22px on larger screens but responsive on small
     viewports. Clamp ensures a min, a fluid middle value, and a max of 22px. */
    font-size: clamp(16px, 1.25rem + 0.5vw, 22px);
  }

  /* Apply difference blending to textual elements so they invert against the
     background/video. This selector covers headings, paragraphs and common
     inline text elements. If you need to opt-out a specific element, add
     `mix-blend-mode: normal` for that selector. */
  h1,
  h2,
  h3,
  h4,
  h5,
  h6,
  p,
  li,
  button,
  label,
  a,
  span,
  strong,
  em,
  b,
  i,
  small,
  sub,
  sup,
  mark,
  q,
  cite,
  code,
  pre {
    mix-blend-mode: difference;
  }

  /* Opt-out: keep h1 rendered normally (no blend) for consistent color and contrast */
  h1 {
    mix-blend-mode: normal !important;
  }

  /* If any element in the tree has created an isolated stacking context (e.g. via
     `isolation: isolate`), mix-blend-mode may not be able to blend against the
     video underneath. Override isolation for the main hero and overlay areas so
     text can blend with the background video. */
  #hero-content,
  #about-overlay,
  .slide-section,
  .fixed-scroll-text {
    isolation: auto !important;
  }
}

/* SKILLS logos: vertical stack under the SKILLS heading */
@layer components {
  .skills-logos {
    position: absolute;
    left: 1.5rem; /* left-6 */
    top: 13rem; /* pushed further down from the H1 */
    bottom: 1rem; /* span down to near the bottom of the viewport */
    display: flex;
    flex-direction: column;
    justify-content: space-between; /* spread logos from under H1 to near bottom */
    gap: 0; /* remove gaps so hover areas can touch */
    z-index: 60;
    pointer-events: auto; /* allow hover interactions */
  }

  .skill-logo {
    /* responsive size that scales with viewport height when vertical
       (desktop). Media queries for horizontal layout override this value. */
    width: clamp(40px, 4.5vh, 72px);
    height: auto;
    object-fit: contain;
    display: block;
    filter: none;
    opacity: 0.98;
    transform-origin: center;
    transition: transform 260ms cubic-bezier(0.22, 0.1, 0.16, 1), filter 260ms ease, opacity 200ms ease;
  }

  /* Interaction states for Dock-like hover effect */
  .skill-logo.is-active {
    transform: scale(1.6);
    z-index: 70;
  }

  .skill-logo.is-adjacent {
    transform: scale(1.18);
    z-index: 65;
  }

  /* skill item: larger clickable/hover area so there's no 'dead' space */
  .skill-item {
    display: flex;
    align-items: start;
    justify-content: center;
    width: auto; /* allow flex container to size based on logo */
    height: auto;
    padding: 6px 0; /* small vertical padding for touch area */
    box-sizing: content-box;
    user-select: none;
    -webkit-tap-highlight-color: transparent;
  }

  /* state classes live on the .skill-item and target the inner image */
  .skill-item.is-active .skill-logo {
    transform: scale(1.6);
    z-index: 70;
  }
  .skill-item.is-adjacent .skill-logo {
    transform: scale(1.18);
    z-index: 65;
  }

  /* Responsive: on small viewports make the logo stack flow horizontally
     between the H1 and paragraph (so it sits in document flow). Also scale
     logos fluidly using clamp() so they adapt to viewport size. */
  /* Trigger horizontal layout a bit earlier (at <=768px) and allow logos
     to scale with viewport height. When horizontal, make the row span nearly
     full viewport width with small side margins and distribute logos across it. */
  @media (max-width: 768px) {
    .skills-title {
      /* place the SKILLS H1 into normal flow on small screens so the
         logo row naturally sits directly beneath it rather than overlapping
         the paragraph. Desktop keeps absolute positioning. */
      position: relative;
      top: auto;
      left: auto;
      margin: 0 0 0.5rem 0;
      mix-blend-mode: normal !important;
    }

    .skills-logos {
      position: relative; /* flow between H1 and paragraph */
      left: auto;
      top: auto;
      display: flex;
      flex-direction: row;
      justify-content: space-between; /* spread logos across available width */
      align-items: flex-start; /* align to top so logos sit under the H1 */
      gap: 0.5rem;
      width: calc(100% - 2rem); /* full viewport width with 1rem margins each side */
      margin: 0.5rem auto 1rem auto; /* sit right under H1 and above paragraph */
      z-index: 60;
      pointer-events: auto;
    }

    .skill-item {
      width: auto;
      height: auto;
      padding: 0;
      flex: 0 0 auto; /* prevent items from stretching */
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .skill-logo {
      /* scale logos based on viewport height (vh) while keeping sensible min/max */
      width: clamp(28px, 6vh, 64px);
      height: auto;
      display: block;
      transform-origin: center;
    }

    /* slightly reduced dock scale on narrow screens so expansion feels proportional */
    .skill-item.is-active .skill-logo {
      transform: scale(1.4);
    }
    .skill-item.is-adjacent .skill-logo {
      transform: scale(1.12);
    }
  }
}

/* Haze/glow text effect: use a duplicated blurred layer via ::before.
   JavaScript will add the `haze-text` class and a `data-text` attribute
   to target elements (h1-h6, p, li, button, label). */
@layer components {
  /* Use text-shadow to produce a glow effect (replaces the previous pseudo-element haze)
     We mimic spread by applying multiple shadows with increasing blur radii. Values chosen
     to match the visual spread from the previous blur (soft layer ~12px / paragraph ~4px).
     text-shadow uses currentColor so it matches the element color (e.g., text-red-600). */
  h1 {
    /* Stronger subtle glow for main headings */
    /* slightly stronger glow for more presence */
    text-shadow: 0 0 8px currentColor, 0 0 18px rgba(0, 0, 0, 0.12), 0 3px 24px rgba(0, 0, 0, 0.16);
  }

  p {
    /* Slightly stronger paragraph glow */
    text-shadow: 0 0 2px currentColor, 0 0 6px rgba(0, 0, 0, 0.07);
  }

  /* Apply a modest glow to other text elements so the effect is consistent site-wide */
  h2,
  h3,
  h4,
  h5,
  h6,
  a,
  span,
  li,
  button,
  label {
    text-shadow: 0 0 2px currentColor, 0 0 5px rgba(0, 0, 0, 0.06);
  }

  /* Per-letter hover styling: split text into .char spans and apply a soft skew/italic transition */
  .text-split {
    display: inline-block; /* keep container inline but allow children transforms */
    line-height: 1;
    /* hide native cursor even over text - we use a custom cursor element instead */
    cursor: none;
  }

  .text-split .char {
    display: inline-block;
    white-space: pre; /* preserve spaces/newlines if present */
    -webkit-user-select: text;
    user-select: text;
    transform-origin: 50% 50%;
    /* longer, transform-only transition with a smooth ease to avoid final jolt */
    transition: transform 420ms cubic-bezier(0.22, 0.1, 0.16, 1), color 220ms ease;
    /* no stagger by default; ensure no per-letter delay so all letters animate together */
    transition-delay: 0ms;
    will-change: transform;
    /* default scale is 1; JS will set --scale so we can precisely scale by pixels without layout shift */
    --scale: 1;
  }

  /* Word-level split: wrap words in .word and apply hover to entire word */
  .text-split .word {
    display: inline-block;
    white-space: pre;
    -webkit-user-select: text;
    user-select: text;
    transform-origin: 50% 50%;
    transition: transform 220ms cubic-bezier(0.2, 0.9, 0.3, 1), font-style 180ms ease, color 160ms ease;
    --scale: 1;
  }

  .text-split .word:hover {
    /* Slightly scale the whole word on hover (no tilt) to give a bit more pop while
     individual letters still animate with skew/scale. The per-letter transform is
     applied to .char; the word-scale is a small additional multiplier. */
    transform: scale(var(--word-scale, 1.06));
    transform-origin: center;
    /* font-style removed to avoid reflow/metric changes; visual tilt is handled
     purely by transform on the .char elements for smooth animation */
  }

  /* Per-letter inside each word: inherit text-shadow and animate on word hover */
  .text-split .word .char {
    display: inline-block;
    white-space: pre;
    transform-origin: 50% 50%;
    /* match the per-letter transition duration so all letters animate in sync;
       use transform-only to ensure smooth motion */
    transition: transform 420ms cubic-bezier(0.22, 0.1, 0.16, 1), color 220ms ease;
    will-change: transform;
    /* ensure the shadow is visible even though text was replaced with spans */
    text-shadow: inherit;
    mix-blend-mode: inherit;
  }

  /* Explicitly re-apply the h1/p text-shadow to per-letter spans because
     some browsers may not render the inherited shadow as expected when text
     is wrapped in many inline elements. Using explicit rules ensures the
     glow remains visible. */
  h1.text-split .word .char {
    /* stronger h1 per-letter glow to match visual weight */
    text-shadow: 0 0 8px currentColor, 0 0 18px rgba(0, 0, 0, 0.12), 0 3px 24px rgba(0, 0, 0, 0.16);
    /* restore font kerning and add a tiny positive tracking so adjacent glyphs
       (like the double A in ELLEGAARD) don't visually overlap when split into
       separate spans. Also ensure blend mode is normal for these letters so
       we don't get inverted/dark artefacts where glyphs overlap. */
    font-kerning: normal;
    -webkit-font-kerning: normal;
    letter-spacing: 0.02em;
    mix-blend-mode: normal !important;
  }

  p.text-split .word .char {
    /* Use a slightly smaller red glow for paragraph text so it feels lighter. */
    /* prefer brand red via CSS variable; use RGB var for rgba() alpha blends */
    text-shadow: 0 0 4px currentColor, 0 0 8px rgba(var(--color-red-rgb), 0.1);
  }

  /* fallback for other small text elements that used the global text-shadow */
  .text-split .word .char {
    text-shadow: 0 0 2px currentColor, 0 0 5px rgba(0, 0, 0, 0.06);
  }

  /* When hovering the word, animate each letter the same way (no spread) */
  .text-split .word:hover .char {
    /* All letters animate together (no stagger). Use transform-only tilt so
       the browser can keep animation on the compositor thread for maximum
       smoothness and avoid reflow at the end. */
    transform: skewY(-14deg) translateY(-1px) scale(var(--scale, 1));
    transition-delay: 0ms;
  }
}

/* Slide-in overlay styles */
@layer components {
  /* utility for backdrop blur layers */
  .hero-blur-layer {
    position: fixed;
    inset: 0;
    pointer-events: none;
    will-change: backdrop-filter, opacity;
    z-index: 20;
  }

  .slide-section {
    position: fixed;
    inset: 0;
    width: 100%;
    height: 100vh;
    transform: translateX(100%);
    opacity: 0;
    transition: transform 500ms cubic-bezier(0.22, 0.9, 0.34, 1), opacity 400ms ease;
    will-change: transform, opacity;
    background: transparent; /* keep video visible underneath */
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 40;
    overflow: hidden;
  }

  /* SKILLS section: starts off-screen (below viewport). JS will animate
     translateY from 100% -> 0% as user scrolls. z-index above overlay heading
     so it can visually push the overlay text out of the way. */
  .skills-section {
    position: fixed;
    inset: 0;
    width: 100%;
    height: 100vh;
    transform: translateY(100%);
    will-change: transform, opacity;
    z-index: 55;
    pointer-events: none; /* enabled by JS when fully visible */
    display: block;
    overflow: hidden;
    background: transparent; /* show video behind */
  }

  .skills-title {
    mix-blend-mode: normal !important; /* ensure solid red title */
  }

  .skills-paragraph {
    /* Force a consistent 22px size as requested and use compact line-height */
    font-size: 22px;
    line-height: 1;
  }

  /* Slightly reduce the top spacing on small screens so the paragraph doesn't
     get pushed too far down off small viewports */
  @media (max-width: 640px) {
    .skills-paragraph {
      margin-top: 0;
    }
  }

  .slide-section .inner {
    width: 100%;
    max-height: 100vh;
    overflow: auto;
    padding: 3rem 1.5rem;
    box-sizing: border-box;
    /* use the central --text-color (brand red) */
    color: var(--text-color);
  }

  /* Hero content shift to left when overlay appears */
  .hero-content.shifted {
    transform: translateX(-120%);
    opacity: 0;
    transition: transform 500ms ease, opacity 400ms ease;
  }

  /* fixed bottom scroll text */
  .fixed-scroll-text {
    position: fixed;
    left: 50%;
    bottom: 18px;
    transform: translateX(-50%);
    z-index: 60;
    pointer-events: none;
    display: inline-block; /* ensure width fits content and centering works */
    text-align: center;
    /* make the small caption slightly smaller than body p text */
    font-size: clamp(11px, 0.9rem + 0.2vw, 13px);
  }
}

/* Custom square cursor: small red square that uses mix-blend-mode: difference
   to invert against the background video. Implemented as a fixed element that
   follows the mouse (JS) because CSS cursors can't use blend modes. */
@layer components {
  /* Hide native cursor on non-touch devices (everywhere, including over text).
     Use !important so it cannot be overridden by other rules; interactive
     elements remain usable because the custom cursor has pointer-events: none. */
  body {
    cursor: none !important;
  }

  /* Stronger global rule to ensure the native cursor is hidden across
     elements on pointer devices that support fine pointing. Coarse pointers
     (touch) are handled below and will show the native cursor. */
  @media (pointer: fine) {
    html,
    body,
    * {
      cursor: none !important;
    }
  }

  /* The visual cursor itself: uses currentColor so we can give it the same
     red color by adding the utility class `text-red-600` to the element. */
  #custom-cursor {
    position: fixed;
    left: 50%;
    top: 50%;
    width: 14px;
    height: 14px;
    background: currentColor;
    transform: translate(-50%, -50%);
    pointer-events: none;
    z-index: 9999;
    mix-blend-mode: difference;
    border-radius: 2px; /* slight rounding keeps it from looking too harsh */
    transition: width 120ms ease, height 120ms ease, opacity 160ms ease, transform 120ms ease;
    will-change: transform, left, top, opacity;
    opacity: 0.98;
  }

  /* Note: native cursor override for interactive elements removed so the
    native cursor is never visible on desktop. Inputs will still behave
    correctly (focus caret appears) and the custom cursor is pointer-events:none
    so clicking works as expected. */

  /* Explicitly ensure anchors and other interactive elements never show the
     native cursor on non-touch devices — we use the custom square cursor for
     all pointer feedback. */
  a,
  .inline-link,
  button,
  input,
  textarea,
  select,
  label,
  [role="button"] {
    cursor: none !important;
  }

  /* Inline link styling: keep the link visually similar to surrounding text
     but make it clearly interactive via a subtle underline and hover/focus
     emphasis. Works well inside paragraphs. */

  .inline-link {
    /* make link text white while keeping it visually similar to surrounding
     content; remove underline and rely on text-shadow for emphasis */
    color: #ffffff;
    text-decoration: none;
    border-bottom: none;
    /* make underline fully visible by default so it reads clearly as a link */
    opacity: 1;
    padding-bottom: 1px;
    transition: transform 160ms ease, letter-spacing 160ms ease, box-shadow 160ms ease;
    text-underline-offset: 2px;
    /* white glow to match the white link color */
    text-shadow: 0 0 6px #fff, 0 0 12px rgba(255, 255, 255, 0.06);
  }

  .inline-link:hover,
  .inline-link:focus {
    /* On hover/focus, make the link visually 'pressed' by switching to black
       instead of scaling — keeps the layout stable and gives a clear state. */
    opacity: 1;
    outline: none;
    text-decoration: none;
    letter-spacing: 0;
    transform: none;
    /* on hover, switch to a darker red instead of black */
    color: #991b1b !important; /* tailwind red-800 */
    /* darker red glow for pressed state */
    text-shadow: 0 0 4px rgba(153, 27, 27, 0.7), 0 0 8px rgba(153, 27, 27, 0.18);
  }

  /* Accessibility: visible focus ring for keyboard users */
  .inline-link:focus-visible {
    box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.06), 0 0 0 6px rgba(0, 0, 0, 0.12);
    border-radius: 2px;
  }

  /* Hide the custom cursor on coarse pointer devices (touchscreens) to avoid
     awkwardness — on those devices the native touch interactions should remain. */
  @media (pointer: coarse) {
    #custom-cursor {
      display: none !important;
    }
    body {
      cursor: auto !important;
    }
  }
}
/* Ensure Tailwind utility `text-red-600` (and similar usages) map to our
     central brand red so all components using that utility pick up the change. */
@layer components {
  .text-red-600 {
    color: var(--color-red) !important;
  }
}

@layer utilities {
  /* small hopping animation for playful bottom text */
  @keyframes hop {
    0%,
    100% {
      transform: translateX(-50%) translateY(0);
    }
    50% {
      transform: translateX(-50%) translateY(-6px);
    }
  }

  .hop {
    animation: hop 1.8s ease-in-out infinite;
    display: inline-block; /* allow transform without affecting layout */
  }
}
